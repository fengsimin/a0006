<?php
//Copyright (c) 2016 iFeiwu.com
 class Site extends Item { function __construct() { $this->table = "\163\151\164\x65"; parent::__construct(); } protected function getData() { goto raM50; DdIPR: $site = array(); goto aDntL; aDntL: foreach ($data as $d) { goto MqfFL; O5IKH: if (!($value != '')) { goto CgORL; } goto swCHS; MqfFL: $value = $d["\166\x61\154\165\x65"]; goto O5IKH; QNhCP: CgORL: goto iad1C; swCHS: $site[$d["\x6e\141\155\145"]] = $value; goto QNhCP; iad1C: ogG0p: goto jVgAu; jVgAu: } goto tL2zn; k2tMu: return $this->success($site); goto JOzNa; tL2zn: EiSbq: goto k2tMu; raM50: $data = $this->db->select($this->table)->all(); goto DdIPR; JOzNa: } protected function postSave($request_data) { goto p3DMo; DxPUz: tu6fo: goto JZVVc; RQ_ST: $this->db->beginTransaction(); goto gGQ3J; VWWoL: return $this->error("\xe5\267\262\344\277\235\xe5\255\x98\345\244\xb1\xe8\264\245\xef\xbc\201"); goto D16mW; oVGaq: $this->_log("\165\160\144\141\164\x65", array("\164\151\x74\154\x65" => "\xe7\275\221\347\xab\231\xe8\xae\xbe\347\275\256")); goto q8sBZ; e6uHo: unset($request_data["\x74\157\x6b\145\156"], $request_data["\x61\144\x6d\x69\x6e"], $request_data["\137\x72\145\155\157\x76\145\x66\151\x6c\x65\163"]); goto WBNTq; IY_1c: if (count($error) === 0) { goto IyBGh; } goto dItPr; FV801: dPLLi: goto IY_1c; WBNTq: $error = array(); goto RQ_ST; sfkgc: $this->db->commit(); goto oVGaq; S0oyR: IyBGh: goto sfkgc; D16mW: goto tu6fo; goto S0oyR; p3DMo: $this->_removeFiles2($request_data["\x5f\x72\145\x6d\157\x76\145\146\151\154\145\163"]); goto e6uHo; dItPr: $this->db->rollBack(); goto VWWoL; gGQ3J: foreach ($request_data as $name => $value) { goto jOfSG; Jfb6g: Psssf: goto C6y5P; cSSHM: if (!($this->db->update($this->table, array("\166\141\154\x75\x65" => $value), array("\x6e\141\155\145", "\75", $name))->is() === false)) { goto k_Y4R; } goto u9PSH; v7eIP: if (!($this->db->insert($this->table, array("\x6e\141\155\x65" => $name, "\166\141\x6c\165\145" => $value))->is() === false)) { goto Psssf; } goto NI4UA; zg_d1: iirMs: goto Szf_E; u9PSH: $error[] = $name; goto K200h; jOfSG: $count = $this->db->select($this->table)->where(array("\x6e\x61\155\x65", "\75", $name))->count(); goto cFy5O; NI4UA: $error[] = $name; goto Jfb6g; cFy5O: $value = $this->_encode($value); goto n9dp0; o3KKB: goto teUHv; goto ifhpI; C6y5P: teUHv: goto zg_d1; K200h: k_Y4R: goto o3KKB; ifhpI: nHfMM: goto v7eIP; n9dp0: if ($count <= 0) { goto nHfMM; } goto cSSHM; Szf_E: } goto FV801; q8sBZ: return $this->success("\xe5\xb7\xb2\xe4\277\235\345\255\230\346\233\xb4\xe6\224\xb9\xef\xbc\201"); goto DxPUz; JZVVc: } protected function postSkin($request_data) { goto weXvH; vEAPA: chmod($filename, 420); goto dxQKU; weXvH: if (!isset($request_data["\x73\x74\171\x6c\x65\x2d\143\157\x64\145"])) { goto ads78; } goto mngTm; dhuT2: q3PHN: goto XH183; Bf4nC: file_put_contents($filename, $request_data["\163\x74\171\154\x65\x2d\143\157\x64\145"]); goto vEAPA; BlfBG: uhaHp: goto wW2UW; EgUfO: unset($request_data["\164\157\153\x65\156"], $request_data["\x61\x64\x6d\x69\156"], $request_data["\163\164\171\x6c\145\55\143\x6f\144\x65"]); goto rlfKZ; tp851: $request_data["\x73\x6b\151\156"] = $skins[1]; goto dhuT2; dxQKU: ads78: goto EgUfO; rlfKZ: if (!isset($request_data["\164\x68\x65\x6d\145\x2d\x73\x6b\x69\156"])) { goto q3PHN; } goto kqynV; Ibe33: $request_data["\x74\x68\x65\155\x65"] = $skins[0]; goto tp851; XH183: foreach ($request_data as $name => $value) { $this->_saveData($this->table, array("\156\x61\155\145" => $name, "\166\x61\x6c\165\145" => $value), array("\x6e\x61\155\x65", "\x3d", $name)); dTywH: } goto BlfBG; mngTm: $filename = "\56\x2e\x2f\141\x73\163\x65\x74\57\x63\163\x73\x2f\163\x74\x79\154\x65\x2e\143\x73\163"; goto Bf4nC; wW2UW: return $this->success("\345\xb7\xb2\344\277\235\xe5\xad\x98\xe6\x9b\xb4\346\x94\271\xef\274\201"); goto ifzcM; kqynV: $skins = explode("\55", $request_data["\164\x68\x65\155\x65\55\x73\x6b\x69\156"]); goto Ibe33; ifzcM: } protected function getStyleCode() { $code = file_get_contents("\56\x2e\x2f\x61\163\x73\145\x74\x2f\143\163\163\x2f\x73\x74\171\x6c\x65\56\143\x73\x73"); return $this->success(array($code)); } }
