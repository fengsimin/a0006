<?php
//Copyright (c) 2016 iFeiwu.com
 class Item extends Ifeiwu { public function __construct() { goto jQcpp; YevV3: $this->table = "\151\x74\x65\x6d"; goto RQP1X; jQcpp: if ($this->table) { goto ypZVZ; } goto YevV3; RQP1X: ypZVZ: goto TyQAL; TyQAL: parent::__construct(); goto xCHDS; xCHDS: } protected function postPage($request_data) { goto BNkQS; wc40x: u4y3f: goto J5u5q; EX3UK: $data = array("\x6c\151\163\x74" => $list, "\x74\x6f\x74\x61\154" => $total, "\160\x65\162\160\x61\x67\x65" => $perpage, "\160\141\147\145" => $page); goto wc40x; mztD7: return $this->success($data); goto o23EO; J5u5q: $this->_callback("\x63\x61\x6c\x6c\142\x61\x63\x6b\x50\x61\x67\x65\101\146\164\x65\x72", array(&$data)); goto mztD7; E00sU: $column = $request_data["\143\157\x6c\x75\x6d\156"] ?: "\52"; goto hjVLi; YpCdS: $list = $this->db->select($this->table, $column)->where($where)->order($order)->limit(array($page * $perpage, $perpage))->all(); goto EX3UK; mLrgA: if ($perpage > 0) { goto Bj86E; } goto FPHlz; KmnkG: $total = $this->db->select($this->table)->where($where)->count(); goto YpCdS; BNkQS: $this->_callback("\x63\x61\x6c\x6c\x62\x61\143\153\x50\x61\147\x65\x42\145\x66\x6f\x72\145", array(&$request_data)); goto E00sU; KIcp1: $page = $page ? $page - 1 : 0; goto KmnkG; wHJ35: $perpage = $request_data["\x70\145\162\x70\141\147\145"] ?: 0; goto mLrgA; Dc9_c: $page = $request_data["\160\141\147\x65"] ?: 1; goto KIcp1; EqS1v: goto u4y3f; goto S0ZCe; FPHlz: $data = $this->db->select($this->table, $column)->where($where)->order($order)->all(); goto EqS1v; S0ZCe: Bj86E: goto Dc9_c; eY9ay: $order = $request_data["\x6f\x72\x64\x65\162"] ?: $this->order; goto wHJ35; hjVLi: $where = $request_data["\x77\x68\x65\x72\145"] ?: "\61\x20\x3d\x20\x31"; goto eY9ay; o23EO: } protected function postQuery($request_data) { goto pKJWU; kweDQ: $sql = str_replace("\x24\x74\141\142\x6c\x65", $this->prefix . $this->table, $sql); goto Su1FK; pKJWU: $sql = $request_data["\163\161\x6c"]; goto T0gBt; flxx4: return $this->db->query($sql, $request_data["\166\x61\x6c\165\145\163"])->all(); goto z0Oca; Su1FK: g1Fh9: goto flxx4; T0gBt: if (!(stripos($sql, "\44\x74\x61\x62\x6c\x65") !== false)) { goto g1Fh9; } goto kweDQ; z0Oca: } protected function getOne($id, $column = null) { goto GnegR; gvMko: return $this->success($data); goto eLrbz; ShvGN: $data = $this->db->select($this->table, $column)->where(array("\151\x64", "\75", $id))->get(); goto gvMko; GnegR: $column = $column ?: "\52"; goto ShvGN; eLrbz: } protected function postAdd($request_data) { goto rsinh; XYUTw: $udata = array("\x69\144" => $id); goto YSpwi; BQwXP: $id = $this->db->insert($this->table, $data)->id(); goto K5N9T; n357W: hsN9H: goto SdEGE; ZbsOJ: $this->db->commit(); goto Ujf3C; XGHwK: if (!($pid > 0 && in_array("\154\x65\166\x65\154", $this->fields))) { goto F7Vaj; } goto Isyd7; YSpwi: $pid = $data["\160\x69\x64"]; goto XGHwK; o4c1M: $this->_log("\x61\x64\144", array("\164\151\x74\x6c\x65" => $data["\164\x69\164\x6c\x65"], "\164\x61\x62\154\145\x5f\x69\144" => $id)); goto ZbsOJ; K5N9T: if ($id) { goto ZgbG6; } goto Zx7BA; qz5YR: if ($this->db->update($this->table, $udata, array("\151\144", "\x3d", $id))->is()) { goto KCUAB; } goto HHJOa; Zx7BA: return $this->error("\xe6\xb7\xbb\xe5\x8a\240\346\225\260\xe6\x8d\256\345\xa4\261\350\xb4\245\xef\xbc\201"); goto VjwTI; Isyd7: $udata["\154\145\x76\x65\154"] = $this->_getLevel($pid, $id); goto uOwJD; EYncB: $upload_name = $request_data["\44\165\160\154\157\141\144\137\x6e\x61\x6d\145"]; goto htgI6; Cz97k: YZOuL: goto qz5YR; uOwJD: F7Vaj: goto EYncB; rsinh: $this->_callback("\x63\x61\154\x6c\x62\x61\143\x6b\x41\x64\144\x42\x65\x66\x6f\162\x65", array(&$request_data)); goto Mj8MR; RYU94: $upload_path = $this->_bulidUploadPath($upload_path, $data); goto vIOHD; j8B9H: goto hsN9H; goto EY1NS; Ujf3C: return $this->success("\xe6\267\273\345\212\240\xe6\x95\xb0\346\x8d\xae\346\210\x90\345\x8a\x9f\xef\xbc\201", array("\151\144" => $id, "\x69\155\141\x67\x65\137\160\x61\x74\150" => $upload_path)); goto n357W; Mj8MR: $this->_removeFiles2($request_data["\137\x72\x65\155\157\x76\x65\146\x69\154\145\163"]); goto v0qTM; khq63: if (!($upload_name && $upload_path)) { goto YZOuL; } goto TAScq; TaeWt: $this->_callback("\143\x61\x6c\154\142\141\x63\153\x41\144\144\x41\146\x74\145\x72", array($id, &$request_data)); goto o4c1M; EY1NS: KCUAB: goto TaeWt; HHJOa: $this->db->rollBack(); goto fd9g2; htgI6: $upload_path = $request_data["\x24\165\x70\x6c\157\141\x64\x5f\x70\141\164\x68"]; goto khq63; w9AOZ: $this->db->beginTransaction(); goto BQwXP; vIOHD: $udata[$upload_name] = $upload_path; goto Cz97k; v0qTM: $data = $this->_bulidData($request_data); goto Z_ALt; Z_ALt: $data["\x63\164\151\155\145"] = time(); goto w9AOZ; TAScq: $data["\151\x64"] = $id; goto RYU94; VjwTI: ZgbG6: goto XYUTw; fd9g2: return $this->error("\xe6\267\xbb\345\212\240\346\x95\260\346\x8d\256\xe5\244\261\350\xb4\xa5\357\xbc\x81"); goto j8B9H; SdEGE: } protected function postUpdate($id, $request_data) { goto HnCV4; Wdp33: return $this->success("\345\xb7\xb2\344\xbf\x9d\xe5\xad\230\xe6\233\264\xe6\x94\271\357\xbc\201"); goto qBA54; LbZu0: $this->_log("\165\160\x64\141\164\145", array("\164\x69\x74\154\145" => $data["\x74\x69\x74\154\145"])); goto Wdp33; MzPEt: if ($this->db->update($this->table, $data, array("\151\144", "\x3d", $id))->is()) { goto WX9UG; } goto GfzAQ; hcKdw: $data["\154\x65\166\x65\154"] = $this->_getLevel($pid, $id); goto O2IYn; LhMa2: $upload_path = $this->_bulidUploadPath($upload_path, $data); goto ziwiG; zjIg0: PpaCI: goto E3ESG; NFIf3: $pid = $data["\160\x69\144"]; goto MkY_2; HnCV4: $this->_callback("\143\141\x6c\x6c\x62\141\143\x6b\125\x70\x64\141\164\x65\102\x65\146\x6f\162\145", array(&$request_data)); goto ZfdAn; O2IYn: ps1dL: goto yzfG9; ZfdAn: $this->_removeFiles2($request_data["\x5f\162\x65\155\x6f\166\x65\146\x69\154\145\163"]); goto xH9ua; xH9ua: $data = $this->_bulidData($request_data); goto rcOKk; E3ESG: emc0s: goto MzPEt; RQUzW: $upload_path = $request_data["\x24\x75\160\154\157\x61\144\x5f\160\x61\164\150"]; goto jLWgU; qBA54: iC0Jx: goto jrMF1; ONwq6: $data[$upload_name] = $upload_path; goto zjIg0; rTsg2: WX9UG: goto BPpt2; yzfG9: $upload_name = $request_data["\x24\165\160\x6c\x6f\141\x64\x5f\x6e\141\155\x65"]; goto RQUzW; ziwiG: if (!in_array($upload_name, $this->fields)) { goto PpaCI; } goto ONwq6; MkY_2: if (!($pid > 0 && in_array("\x6c\145\x76\x65\x6c", $this->fields))) { goto ps1dL; } goto hcKdw; Hr6bJ: goto iC0Jx; goto rTsg2; jLWgU: if (!($upload_name && $upload_path)) { goto emc0s; } goto LhMa2; GfzAQ: return $this->error("\344\277\x9d\345\255\230\xe5\xa4\xb1\350\264\xa5\357\274\201"); goto Hr6bJ; rcOKk: $data["\x75\164\151\x6d\145"] = time(); goto NFIf3; BPpt2: $this->_callback("\143\x61\154\x6c\142\141\x63\153\x55\160\144\141\x74\x65\x41\x66\164\x65\x72", array($id, &$request_data)); goto LbZu0; jrMF1: } protected function postField($request_data) { goto CKMrZ; EBt21: YW4k9: goto JRbLk; omJ9d: if ($this->db->update($this->table, array($name => $value), array("\x69\x64", "\x49\116", $ids))->is()) { goto yIv2c; } goto flkch; CKMrZ: $ids = $request_data["\151\x64"]; goto DE55a; flkch: return $this->error(); goto dWoLS; jBdl3: $value = $request_data["\x76\x61\154\x75\145"]; goto omJ9d; DE55a: $name = $request_data["\x6e\x61\x6d\145"]; goto jBdl3; nExeS: return $this->success(); goto EBt21; dWoLS: goto YW4k9; goto JUWlU; JUWlU: yIv2c: goto nExeS; JRbLk: } protected function postCount($request_data) { goto wZNg7; tdoE3: return $this->db->select($table)->where($where)->count(); goto G3uVd; wZNg7: $table = $request_data["\x74\141\142\x6c\x65"] ?: $this->table; goto n47HY; n47HY: $where = $request_data["\167\150\145\162\145"] ?: "\x31\x20\75\40\61"; goto tdoE3; G3uVd: } protected function postDelete($request_data) { goto n23ai; BWW00: $this->db->beginTransaction(); goto Z3_Nv; A_NtH: if (count($error) === 0) { goto aQYmX; } goto c26Hd; EqilH: UDRbQ: goto A_NtH; xLVvE: $error = array(); goto Fufxo; c26Hd: $this->db->rollBack(); goto de0oT; eIgEi: goto Z4A05; goto RVXx8; Z3_Nv: foreach ($ids as $id) { goto Lop70; NhT8k: goto bIj7Y; goto XNV2j; XNV2j: goto plK0Z; goto doHlx; Lop70: $item = $this->db->select($this->table)->where(array("\151\144", "\x3d", $id))->get(); goto HzaZx; doHlx: iK94h: goto Wjt8M; t4U6V: $error[] = $id; goto NhT8k; uyeUi: bIj7Y: goto LxriD; HzaZx: if ($this->db->delete($this->table, array("\151\144", "\x3d", $id))->is()) { goto iK94h; } goto t4U6V; lT2wI: plK0Z: goto uyeUi; Wjt8M: $this->_trash($item, $request_data); goto lT2wI; LxriD: } goto EqilH; VU4Eb: $this->_callback("\143\x61\x6c\x6c\142\x61\143\153\x44\x65\154\145\x74\145\x41\146\164\x65\162", array(&$request_data)); goto CLeuW; pvsLY: return $this->success(); goto QrQdq; Fufxo: $ids = $request_data["\x69\144"]; goto BWW00; RVXx8: aQYmX: goto VU4Eb; n23ai: $this->_callback("\143\141\154\x6c\x62\141\143\x6b\x44\145\x6c\x65\x74\145\102\x65\146\157\162\x65", array(&$request_data)); goto xLVvE; uyDi6: $this->_log("\x72\145\155\x6f\x76\145", array("\x74\151\164\154\145" => count($ids))); goto pvsLY; QrQdq: Z4A05: goto ldSyE; de0oT: return $this->error("\346\x9c\211\x20" . count($error) . "\xe6\x9d\241\xe6\x95\xb0\xe6\x8d\256\345\x88\240\351\x99\xa4\xe5\xa4\261\350\264\xa5\357\xbc\201"); goto eIgEi; CLeuW: $this->db->commit(); goto uyDi6; ldSyE: } }
